<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8">
<title>Ryby Multiplayer</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
*{box-sizing:border-box}html,body{margin:0;height:100%;font-family:system-ui,sans-serif}
button,input{font:inherit}
:root{--hdr:48px;--panel:rgba(255,255,255,.93);--chatHeader:42px}

/* ===== HEADER ================================================ */
header{position:fixed;top:0;left:0;right:0;height:var(--hdr);display:flex;gap:10px;
       align-items:center;padding:0 10px;background:rgba(0,0,0,.85);color:#fff;z-index:20}
header button{background:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer}
#logo{height:34px}

/* ===== VIEWPORT ============================================== */
#viewport{position:absolute;top:var(--hdr);bottom:0;left:0;right:0;display:flex;overflow:hidden}
#game{flex:1;background:#000;width:100%;height:100%;display:block}

/* ===== CHAT – DESKTOP (boczny) =============================== */
#chat-container{width:320px;min-width:260px;display:flex;flex-direction:column;
                background:var(--panel);border-left:1px solid #ccc;transition:.25s}
#chat-container.hidden{display:none}

/* Wnętrze */
#chat-header{height:var(--chatHeader);padding:6px 10px;background:#ddd;font-weight:700;
             display:flex;justify-content:space-between;align-items:center;cursor:pointer}
#chat-log{flex:1;padding:8px;overflow-y:auto;font-size:14px}
#chat-controls{display:flex;padding:8px;border-top:1px solid #ccc;background:var(--panel)}
#chat-input{flex:1;padding:6px;font-size:15px}
#send-chat{padding:6px 10px;margin-left:6px}

/* ===== LOBBY ================================================== */
#lobby{position:fixed;inset:0;display:flex;flex-direction:column;background:var(--panel);z-index:25}
#lobby:not([data-open="true"]){display:none}
#lobby h1{text-align:center;margin:16px 0 8px}
#lobby input{width:100%;padding:8px;margin:4px 0}
#lobby button{padding:8px 12px;margin:8px 0}
#rooms-list{list-style:none;padding:0;margin:8px 0;font-size:15px}
#rooms-list li{margin:4px 0;padding:4px 6px;border:1px solid #ccc;border-radius:4px}

/* ===== SCORES MODAL ========================================== */
#scores-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
              background:rgba(0,0,0,.35);z-index:30}
#scores-modal.show{display:flex}
#scores-box{background:#fff;max-width:90%;max-height:80%;overflow:auto;padding:20px;border-radius:6px;position:relative}
#scores-close{position:absolute;top:6px;right:6px;border:none;background:0;font-size:22px;cursor:pointer}

/* ===== MOBILE ≤640 px ***************************************** */
@media (max-width:640px){
  /* chat jako drawer z góry (wys. 40 vh) */
  #chat-container{
    position:fixed;left:0;right:0;top:var(--hdr);height:40vh;max-height:270px;
    transform:translateY(calc(-100% + var(--chatHeader))); /* pokaż nagłówek */
    transition:.3s ease-out;border:none;box-shadow:0 2px 6px rgba(0,0,0,.3);z-index:22
  }
  #chat-container.show     {transform:translateY(0)}
  #chat-container.collapsed{transform:translateY(calc(-100% + var(--chatHeader)))} /* domyślnie */
  #chat-btn{display:none}       /* przycisk w nagłówku niepotrzebny na mobile */
}

@media (min-width:641px){
  #chat-container.hidden{display:none}
}
</style>
</head>
<body>

<header>
  <img id="logo" src="assets/logo.png" alt="logo">
  <button id="lobby-btn">☰ Lobby</button>
  <div id="score">Punkty: 0</div>
  <button id="chat-btn">Chat</button>
  <button id="scores-btn">Scores</button>
</header>

<div id="viewport">
  <canvas id="game" width="800" height="600"></canvas>

  <!-- chat startuje w stanie 'collapsed' (mobile) lub 'hidden' (desktop) -->
  <aside id="chat-container" class="collapsed">
    <div id="chat-header">Chat <span id="toggle-chat">⬆</span></div>
    <div id="chat-log"></div>
    <div id="chat-controls" style="display:none">
      <input id="chat-input" placeholder="Wpisz wiadomość…">
      <button id="send-chat">Wyślij</button>
    </div>
  </aside>
</div>

<section id="lobby" data-open="true">
  <h1>Lobby</h1>
  <input id="room-input" placeholder="Nazwa pokoju">
  <input id="name-input" placeholder="Twoja nazwa">
  <button id="join-btn">Dołącz</button>
  <h2>Aktywne pokoje</h2>
  <ul id="rooms-list"></ul>
</section>

<div id="scores-modal">
  <div id="scores-box">
    <button id="scores-close">×</button>
    <h2>Ranking</h2>
    <ul id="scores-list"></ul>
  </div>
</div>

<script src="main.js"></script>
</body>
</html>
